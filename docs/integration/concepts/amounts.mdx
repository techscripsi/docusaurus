---
sidebar_position: 20
---

# Amounts

A total cart amount is not passed by a single property. Instead, amounts are specified per item identifier. This allows flexible control over the items life cycle (see the [Items Life Cycle](/docs/integration/concepts/payment-lifecycle) section for more details).

## `amountMode`

<!--
* Если amountMode не задан, то платёжный шлюз считает, что используется declared. ???
-->

The `amountMode` property defines how OmniCart will treat the value passed in the item `amount` property. It can be defined on the cart, tag, and item level. The available options for this property are `declared` and `calculated`.

You can set this property using the [init](/docs/api/10-init) or [modify](/docs/api/40-modify) method (see the [Modifying Items](/docs/integration/concepts/modify) section for more information on the `modify` method).

<Columns>
  <Column>
    ### `declared`
    If `amountMode` is set to `declared`, the value of the `amount` property is included in the invoice exactly as it was received form from by OmniCart. The additional `quantity` and `amuntModifier`  properties are saved in OmniCart but have no effect on the final item price.
    ### `calculated`
    If `amountMode` is set to `calculated`, the `amount` value is the price per unit of goods (actual items, liters, minutes, etc.). The final price is a product of the `amount`, `quantity`, and `amountModifier` values.
    * `quantity` - number or volume of goods. Can be a whole number or a decimal fracture. For example, you can sell mana in bottles or in liters.
    * `amountModifer` - additional `amount` multiplier. You can use it to apply discounts or for any purpose you see fit.
    :::tip
    Technically, `quantity` and `amountModifer` are just `amount` multipliers. However, `quantity` can be defined only on the item level while `amountModifer` can be defined on the cart, tag, and item level.
    :::
  </Column>
  <Column>
    ```js title="Legend"
      // info
      //properties that affect the final item price
    ```
    <Tabs>
      <TabItem value="declared">
        ```js
          "gems": {
        //info
          "amount": 5000,
          "quantity": 4,
          "paymentFilter": {
        //highlight-next-line
            "amountMode": "declared",
            "amountModifier": 0.7,
            }
          }
        ```
      In the example above, `amountMode` is `declared`. That means only the `amount` value is taken into account. The final price for the `gems` item is `5000`.
      
      The `quantity` and `amountModifier` properties are stored by OmniCart but they do not affect the final item price.
      </TabItem>
      <TabItem value="calculated">
        ```js
          "gems": {
        //info
          "amount": 5000,
        //info
          "quantity": 4,
          "paymentFilter": {
        //highlight-next-line
            "amountMode": "calculated",
        //info
            "amountModifier": 0.7,
            }
          }
      ```
      In the example above, `amountMode` is `calculated`. That means the final price is calculated by OmniCart upon receiving the [init](/docs/api/10-init) or [modify](/docs/api/40-modify) request. The final item price is a product of `amount`, `quantity`, and `amountModifier`, that is, `14000`.
      :::warning Please, note
      The result is rounded to the nearest whole number. If the resulting number is less that `1`, OmniCart will return an error.
      :::
      </TabItem>
    </Tabs>
  </Column>
</Columns>

## `totalAmounts` and `itemAmounts`

`totalAmounts` and `itemAmounts` are objects that are returned in successful responses to the [status](/docs/api/15-status) method.

:::note
See the [Payment Life Cycle](/docs/integration/concepts/payment-lifecycle) section for more information on payment statuses.
:::

* The `totalAmounts` object contains information on the total amounts per statuses for the entire request scope. That means that if you, for example, filter your [status](/docs/api/15-status) request by a tag, the `totalAmounts` object will contain the total amounts of all cart items marked with that tag.
* The `itemAmounts` object contains information on the amounts per statuses of specific items. If a cart contains a single item, the `totalAmounts` values are equal to the `itemAmounts` values.

<!--
See the [Items Life Cycle](/docs/integration/concepts/payment-lifecycle) section for more information on payment statuses.
-->

<!--
Статусы учитываются скорее по товарным позициям, чем по корзине, подробнее см. жизненный цикл товарных позиций [Payment Life Cycle](/docs/integration/concepts/payment-lifecycle). 
-->

<Columns>
  <Column>
    * `initiated` - the amount that was registered with the [`init`](/docs/api/10-init) method. This amount cannot be changed regardless of the payment status.
    * `canceled` - the approved amount that has been canceled. This value may increase per [init](/docs/api/10-init) scope and per specific as cart items can be canceled fully or partially.
    * `captured` - the approved amount that has been captured. Cart items do not have to be captured all at once, so a cart may contain items that are approved but hasn't been captured or canceled. At the same time, if an item is already captured, it cannot increase. So totalAmout can increase
    * `completed` - the amount that has been processed after capture. This value may increase per [init](/docs/api/10-init) scope after previously approved amounts are captured and processed.
    :::note
    Note that if `amountMode` is set to `calculated` for // `totalAmounts` and `itemAmounts` display the amounts  // `amountMode` is set to `calculated` applied
    :::
  </Column>
  <Column>
    <Tabs>
      <TabItem value="totalAmounts">
        ```js
        //highlight-next-line
        "cartId": "6f891edb-1e1f-48bb-b042-2cb790a0f402",
        "currency": "EUR",
        //highlight-next-line
        "totalAmounts": {
          "initiated": 999,
          "canceled": 99,
          "captured": 900,
          "completed": 800,
          "refunded": 100
        },
        ```
      </TabItem>
      <TabItem value="itemAmounts">
        ```js
        //highlight-next-line
        "gems": {
          "paymentStatus": "captured",
        //highlight-next-line
          "itemAmounts": {
            "initiated": 120,
            "canceled": 0,
            "captured": 120,
            "completed": 0,
            "refunded": 0
          },
        ```
        Note that the current `paymentStatus` of the `gems` item is `captured`. The payment for this item hasn't been `completed` yet. Nor it could be `refunded` since refunds are possible only after a payment is completed.
        
        
        
        
      </TabItem>
    </Tabs>
  </Column>
</Columns>

| Property | Description | May Increase | May Decrease |
| :-- | :-- | :-- | :-- |
| `initiated` | The amount that was registered with the [`init`](/docs/api/10-init) method. This amount cannot be changed in the future regardless of any payment status. | `totalAmounts`<br />`itemAmounts` | `totalAmounts`<br />`itemAmounts` |
| `canceled` | The amount that has been canceled after being approved (see the [Pament Life Cycle](/docs/integration/concepts/payment-lifecycle) section for more information). Items can be canceled fully or partially, so this amount can increase per [init](/docs/api/10-init) scope and per specific item. | `totalAmounts`<br />`itemAmounts` | `totalAmounts`<br />`itemAmounts` |
| `captured` | The captured amount. Cart items do not have to be captured all at once, so a cart may contain items that are approved but hasn't been captured or canceled. | `totalAmounts`<br />`itemAmounts` | `totalAmounts`<br />`itemAmounts` |
| `completed` | The amount that has been processed after capture. This value may increase per [init](/docs/api/10-init) scope after previously approved amounts are captured and processed. | `totalAmounts`<br />`itemAmounts` | `totalAmounts`<br />`itemAmounts` |
| `refunded` |  | `totalAmounts`<br />`itemAmounts` | `totalAmounts`<br />`itemAmounts` |

After an Item is captures, it cannot be canceled.